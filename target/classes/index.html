<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>MuleSoft Training Airline Reservation System</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="http://www.json.org/json2.js"></script>
<script type="text/javascript">
	function ajaxFunction() {
		var destinationMenu = document.getElementById("destination");
		var originationMenu = document.getElementById("origination");

		var jsonObject = {
			"destination" : destinationMenu.options[destinationMenu.selectedIndex].value,
			"origination" : originationMenu.options[originationMenu.selectedIndex].value
		};

		var formData = JSON.stringify(jsonObject);

		var ajaxRequest; // The variable that makes Ajax possible!

		try {
			// Opera 8.0+, Firefox, Safari
			ajaxRequest = new XMLHttpRequest();
		} catch (e) {
			// Internet Explorer Browsers
			try {
				ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
			} catch (e) {
				try {
					ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
				} catch (e) {
					// Something went wrong
					alert("Your browser broke!");
					return false;
				}
			}
		}

		// Create a function that will receive data sent from the server
		ajaxRequest.onreadystatechange = function() {
			if (ajaxRequest.readyState == 4) {

				if (ajaxRequest.status == 200) {
					var response = ajaxRequest.responseText;

					document.getElementById("formResponse").innerHTML = response;

				}
			}
		}

		ajaxRequest.open("POST", "/tickets", true);
		ajaxRequest.setRequestHeader("Content-type", "application/json");
		ajaxRequest.send(formData);

	}
</script>

<style type="text/css">
.success {
	border: 2px solid #009400;
	background: #B3FFB3;
	color: #555;
	font-weight: bold;
}

.error {
	border: 2px solid #DE001A;
	background: #FFA8B3;
	color: #000;
	font-weight: bold;
}
</style>

</head>
<body>
	<div class="mfm">
		<center>
			<h2>MuleSoft Training Airline Reservation System</h2>
		</center>

		<form id="myForm" name="myForm" style="margin: 0 auto; width: 500px;">


			<table style="background-color: #CCFFFF" width="500">
				<tr>
					<td><h2>Submit Request:</h2></td>
				</tr>
				<tr>
					<td width="200">Destination:</td>
					<td><select id="destination" name="destination">
							<option value="SFO">SFO</option>
							<option value="LAX">LAX</option>
							<option value="SEA">SEA</option>
							<option value="FOO">FOO</option>
					</select></td>
				</tr>
				<tr>
					<td>Origination:</td>
					<td><select id="origination" name="origination">
							<option value="YYZ">YYZ</option>
							<option value="SQL">SQL</option>
							<option value="ORD">ORD</option>
							<option value="BAR">BAR</option>
					</select></td>
				</tr>
				<tr>
					<td>Submit:</td>
					<td><input name="submit" type="button" value="Submit"
						onClick="return ajaxFunction();"></td>
				</tr>
			</table>

		</form>
	</div>
	<center>
		<table border="0" bordercolor="#FFCC00"
			style="background-color: #FFFFCC" width="500" cellpadding="3"
			cellspacing="3">
			<tr>
				<td><h2>Response:</h2></td>
			</tr>
			<tr>
				<td><div id="formResponse"></div></td>
			</tr>
		</table>
	</center>

</body>
</html>